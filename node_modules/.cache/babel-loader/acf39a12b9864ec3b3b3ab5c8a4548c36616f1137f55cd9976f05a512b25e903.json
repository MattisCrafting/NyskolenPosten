{"ast":null,"code":"import React,{useState}from'react';import{Link,Navigate}from'react-router-dom';import'./Registrering.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Registrering(_ref){let{onRegistrer}=_ref;const[navn,setNavn]=useState('');const[epost,setEpost]=useState('');const[passord,setPassord]=useState('');const[bekreftPassord,setBekreftPassord]=useState('');const[klasse,setKlasse]=useState('');const[feilmelding,setFeilmelding]=useState('');const[suksessmelding,setSuksessmelding]=useState('');const[redirect,setRedirect]=useState(false);const handleSubmit=e=>{e.preventDefault();// Validering\nif(!navn.trim()||!epost.trim()||!passord.trim()||!bekreftPassord.trim()){setFeilmelding('Vennligst fyll ut alle påkrevde felt');return;}if(passord!==bekreftPassord){setFeilmelding('Passordene må være like');return;}if(passord.length<6){setFeilmelding('Passordet må være minst 6 tegn');return;}// Opprett bruker-objekt\nconst nyBruker={navn,epost,passord,klasse};// Send til App-komponenten for registrering\nconst resultat=onRegistrer(nyBruker);if(resultat.success){// Sjekk om e-posten er i admin-listen\nconst erAdmin=epost==='mattis.tollefsen@nionett.no'||epost==='admin@nyskolen.no';setSuksessmelding('Registrering vellykket! '+(erAdmin?'Du er automatisk registrert som redaktør.':'Du kan nå logge inn med din konto.'));// Tøm skjema\nsetNavn('');setEpost('');setPassord('');setBekreftPassord('');setKlasse('');// Redirect etter 3 sekunder\nsetTimeout(()=>{setRedirect(true);},3000);}else{setFeilmelding(resultat.message||'Noe gikk galt ved registrering');}};// Redirect til innlogging etter vellykket registrering\nif(redirect){return/*#__PURE__*/_jsx(Navigate,{to:\"/innlogging\",replace:true});}return/*#__PURE__*/_jsxs(\"div\",{className:\"registrering\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Registrer ny bruker\"}),feilmelding&&/*#__PURE__*/_jsx(\"div\",{className:\"feilmelding\",children:feilmelding}),suksessmelding&&/*#__PURE__*/_jsx(\"div\",{className:\"suksessmelding\",children:suksessmelding}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-gruppe\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"navn\",children:\"Navn:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"navn\",value:navn,onChange:e=>setNavn(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-gruppe\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"epost\",children:\"E-post:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"epost\",value:epost,onChange:e=>setEpost(e.target.value),required:true}),/*#__PURE__*/_jsx(\"small\",{children:\"Visse e-postadresser f\\xE5r automatisk redakt\\xF8r-rettigheter\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-gruppe\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"klasse\",children:\"Klasse:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"klasse\",value:klasse,onChange:e=>setKlasse(e.target.value),placeholder:\"Valgfritt\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-gruppe\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"passord\",children:\"Passord:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"passord\",value:passord,onChange:e=>setPassord(e.target.value),required:true,minLength:\"6\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-gruppe\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"bekreft-passord\",children:\"Bekreft passord:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"bekreft-passord\",value:bekreftPassord,onChange:e=>setBekreftPassord(e.target.value),required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"registrer-knapp\",children:\"Registrer deg\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"registrering-lenker\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Har du allerede en konto? \",/*#__PURE__*/_jsx(Link,{to:\"/innlogging\",children:\"Logg inn\"})]})})]});}export default Registrering;","map":{"version":3,"names":["React","useState","Link","Navigate","jsx","_jsx","jsxs","_jsxs","Registrering","_ref","onRegistrer","navn","setNavn","epost","setEpost","passord","setPassord","bekreftPassord","setBekreftPassord","klasse","setKlasse","feilmelding","setFeilmelding","suksessmelding","setSuksessmelding","redirect","setRedirect","handleSubmit","e","preventDefault","trim","length","nyBruker","resultat","success","erAdmin","setTimeout","message","to","replace","className","children","onSubmit","htmlFor","type","id","value","onChange","target","required","placeholder","minLength"],"sources":["/Users/mattis/src/NyskolenPosten/src/components/Registrering.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Link, Navigate } from 'react-router-dom';\nimport './Registrering.css';\n\nfunction Registrering({ onRegistrer }) {\n  const [navn, setNavn] = useState('');\n  const [epost, setEpost] = useState('');\n  const [passord, setPassord] = useState('');\n  const [bekreftPassord, setBekreftPassord] = useState('');\n  const [klasse, setKlasse] = useState('');\n  const [feilmelding, setFeilmelding] = useState('');\n  const [suksessmelding, setSuksessmelding] = useState('');\n  const [redirect, setRedirect] = useState(false);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    \n    // Validering\n    if (!navn.trim() || !epost.trim() || !passord.trim() || !bekreftPassord.trim()) {\n      setFeilmelding('Vennligst fyll ut alle påkrevde felt');\n      return;\n    }\n    \n    if (passord !== bekreftPassord) {\n      setFeilmelding('Passordene må være like');\n      return;\n    }\n    \n    if (passord.length < 6) {\n      setFeilmelding('Passordet må være minst 6 tegn');\n      return;\n    }\n    \n    // Opprett bruker-objekt\n    const nyBruker = {\n      navn,\n      epost,\n      passord,\n      klasse\n    };\n    \n    // Send til App-komponenten for registrering\n    const resultat = onRegistrer(nyBruker);\n    \n    if (resultat.success) {\n      // Sjekk om e-posten er i admin-listen\n      const erAdmin = epost === 'mattis.tollefsen@nionett.no' || epost === 'admin@nyskolen.no';\n      \n      setSuksessmelding(\n        'Registrering vellykket! ' + \n        (erAdmin \n          ? 'Du er automatisk registrert som redaktør.' \n          : 'Du kan nå logge inn med din konto.')\n      );\n      \n      // Tøm skjema\n      setNavn('');\n      setEpost('');\n      setPassord('');\n      setBekreftPassord('');\n      setKlasse('');\n      \n      // Redirect etter 3 sekunder\n      setTimeout(() => {\n        setRedirect(true);\n      }, 3000);\n    } else {\n      setFeilmelding(resultat.message || 'Noe gikk galt ved registrering');\n    }\n  };\n  \n  // Redirect til innlogging etter vellykket registrering\n  if (redirect) {\n    return <Navigate to=\"/innlogging\" replace />;\n  }\n\n  return (\n    <div className=\"registrering\">\n      <h2>Registrer ny bruker</h2>\n      \n      {feilmelding && <div className=\"feilmelding\">{feilmelding}</div>}\n      {suksessmelding && <div className=\"suksessmelding\">{suksessmelding}</div>}\n      \n      <form onSubmit={handleSubmit}>\n        <div className=\"form-gruppe\">\n          <label htmlFor=\"navn\">Navn:</label>\n          <input \n            type=\"text\" \n            id=\"navn\" \n            value={navn} \n            onChange={(e) => setNavn(e.target.value)} \n            required \n          />\n        </div>\n        \n        <div className=\"form-gruppe\">\n          <label htmlFor=\"epost\">E-post:</label>\n          <input \n            type=\"email\" \n            id=\"epost\" \n            value={epost} \n            onChange={(e) => setEpost(e.target.value)} \n            required \n          />\n          <small>Visse e-postadresser får automatisk redaktør-rettigheter</small>\n        </div>\n        \n        <div className=\"form-gruppe\">\n          <label htmlFor=\"klasse\">Klasse:</label>\n          <input \n            type=\"text\" \n            id=\"klasse\" \n            value={klasse} \n            onChange={(e) => setKlasse(e.target.value)} \n            placeholder=\"Valgfritt\" \n          />\n        </div>\n        \n        <div className=\"form-gruppe\">\n          <label htmlFor=\"passord\">Passord:</label>\n          <input \n            type=\"password\" \n            id=\"passord\" \n            value={passord} \n            onChange={(e) => setPassord(e.target.value)} \n            required \n            minLength=\"6\"\n          />\n        </div>\n        \n        <div className=\"form-gruppe\">\n          <label htmlFor=\"bekreft-passord\">Bekreft passord:</label>\n          <input \n            type=\"password\" \n            id=\"bekreft-passord\" \n            value={bekreftPassord} \n            onChange={(e) => setBekreftPassord(e.target.value)} \n            required \n          />\n        </div>\n        \n        <button type=\"submit\" className=\"registrer-knapp\">\n          Registrer deg\n        </button>\n      </form>\n      \n      <div className=\"registrering-lenker\">\n        <p>\n          Har du allerede en konto? <Link to=\"/innlogging\">Logg inn</Link>\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default Registrering; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}